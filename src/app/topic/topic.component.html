<mat-toolbar color="primary" [ngClass]="'stage'+topic?.stage">
	<div class="flex container">
		<div class="topic-title">
			<h1>{{topic?.name}}</h1>
			<p *ngIf="topic?.stage != C.STAGE_REJECTED && topic?.stage != C.STAGE_PASSED">
				{{ topic?.stageName | translate }} {{ 'TOPIC_SUBTITLE_1' | translate }} {{ topic?.nextDeadline | date:'y-MM-dd' }} {{ 'TOPIC_SUBTITLE_2' | translate }} {{ topic?.nextDeadline | date:'HH:mm:ss' }} (<countdown [time]="topic?.nextDeadline"></countdown>)
				</p>
			<p *ngIf="topic?.stage == C.STAGE_PASSED">{{ topic?.stageName | translate }} {{ 'TOPIC_SUBTITLE_3' | translate }} {{ topic?.stagePassedStarted | date:'y-MM-dd' }}</p>
			<p *ngIf="topic?.stage == C.STAGE_REJECTED">{{ topic?.stageName | translate }}, {{ topic?.rejectedReason | translate }}</p>
		</div>
		<span class="flex-spacer"></span>
		<button mat-icon-button *ngIf="topic?.stage == C.STAGE_SELECTION" title="Als relevant markieren"><fa-icon [icon]="faHandPaper"></fa-icon></button>
		<button mat-icon-button *ngIf="topic?.stage == C.STAGE_PROPOSAL && true" title="Vorschlag erstellen"><fa-icon [icon]="faFileMedical"></fa-icon></button>
		<button mat-icon-button *ngIf="topic?.stage == C.STAGE_PASSED" title="Ergebnis herunterladen"><fa-icon [icon]="faDownload"></fa-icon></button>
		<button mat-icon-button *ngIf="topic?.stage >= C.STAGE_CONSENSUS || topic?.stage == C.STAGE_REJECTED" title="ProzessÃ¼bersicht"><fa-icon [icon]="faSitemap"></fa-icon></button>
		<button mat-icon-button (click)="enterFullscreen()" title="Productive mode"><fa-icon [icon]="faExpandArrowsAlt"></fa-icon></button>
		
		<button mat-icon-button [matMenuTriggerFor]="more">
			<fa-icon [icon]="faEllipsisV"></fa-icon>
		</button>
		<mat-menu #more="matMenu" [overlapTrigger]="false">
			<button mat-menu-item><fa-icon [icon]="faUser"></fa-icon> Autor</button>
			<button mat-menu-item><fa-icon [icon]="faShareSquare"></fa-icon> Teilen</button>
		</mat-menu>
	</div>
</mat-toolbar>

<div class="container">
	<mat-tab-group>
		<mat-tab label="Beschreibung">
			<form [formGroup]="editorForm">
				<quill-editor formControlName="editor" [style]="{height: '300px'}" (onContentChanged)="contentChanged($event)"></quill-editor>
			</form>
			<!--<div [innerHtml]="topic?.body"></div>-->
		</mat-tab>
		<!--<mat-tab label="Referenzen">Referenzen</mat-tab>-->
		<mat-tab label="Mein Vorschlag" *ngIf="topic?.stage == C.STAGE_PROPOSAL">Mein Vorschlag</mat-tab>
		<mat-tab label="Meine Gruppe" *ngIf="topic?.stage == C.STAGE_CONSENSUS">Meine Gruppe</mat-tab>
		<!--<mat-tab label="Statistik">Statistik</mat-tab>-->
		<mat-tab label="Ergebnis" *ngIf="topic?.stage == C.STAGE_PASSED"><div [innerHtml]="topic?.finalDocument"></div></mat-tab>
	</mat-tab-group>
</div>
